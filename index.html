<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giao Di·ªán Nh·∫•p Nh√°y</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            height: 100vh;
            background-color: #F5F5DC; /* N·ªÅn m√†u bee nh·∫π */
            padding-top: 20px; /* Th√™m kho·∫£ng c√°ch ph√≠a tr√™n */
        }
        h1 {
            font-size: 36px; /* K√≠ch th∆∞·ªõc ch·ªØ l·ªõn cho ti√™u ƒë·ªÅ */
            margin-bottom: 10px; /* Kho·∫£ng c√°ch ph√≠a d∆∞·ªõi ti√™u ƒë·ªÅ */
        }
        hr {
            width: 80%; /* Chi·ªÅu r·ªông c·ªßa ƒë∆∞·ªùng k·∫ª */
            border: none; /* Kh√¥ng c√≥ ƒë∆∞·ªùng bi√™n */
            height: 2px; /* ƒê·ªô d√†y c·ªßa ƒë∆∞·ªùng k·∫ª */
            background-color: #3498db; /* M√†u c·ªßa ƒë∆∞·ªùng k·∫ª */
            margin-bottom: 20px; /* Kho·∫£ng c√°ch ph√≠a d∆∞·ªõi ƒë∆∞·ªùng k·∫ª */
        }
        .container {
            display: flex;
            gap: 50px; /* Kho·∫£ng c√°ch gi·ªØa A v√† B */
        }
        .circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            transition: opacity 0.3s;
            text-align: center;
            line-height: 50px; /* CƒÉn gi·ªØa ch·ªØ b√™n trong h√¨nh tr√≤n */
            font-size: 24px; /* K√≠ch th∆∞·ªõc ch·ªØ b√™n trong h√¨nh tr√≤n */
            cursor: pointer; /* Con tr·ªè khi di chu·ªôt l√™n h√¨nh tr√≤n */
        }
        .hidden {
            opacity: 0.5; /* Nh·∫•p nh√°y */
        }
        .button {
            background-color: transparent;
            border: none;
            cursor: pointer;
            font-size: 30px;
            margin: 20px;
        }
        .vertical {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .label {
            font-size: 24px;
            margin-top: 5mm; /* Kho·∫£ng c√°ch kho·∫£ng 5mm gi·ªØa h√¨nh tr√≤n v√† ch·ªØ */
        }
        .circle-container {
            border: 2px solid #3498db; /* ƒê∆∞·ªùng vi·ªÅn m√†u xanh */
            border-radius: 10px; /* Bo tr√≤n c√°c g√≥c */
            padding: 20px; /* Th√™m kho·∫£ng c√°ch b√™n trong */
            background-color: white; /* M√†u n·ªÅn tr·∫Øng cho khung */
            text-align: center; /* CƒÉn gi·ªØa vƒÉn b·∫£n */
        }
        #circleA {
            background-color: black; /* M√†u ƒëen cho A */
            color: white; /* M√†u ch·ªØ tr·∫Øng */
        }
        #circleB {
            background-color: white; /* M√†u tr·∫Øng cho B */
            border: 2px solid black; /* ƒê∆∞·ªùng vi·ªÅn cho B ƒë·ªÉ d·ªÖ th·∫•y */
        }
        .loader {
            display: none; /* ·∫®n loader ban ƒë·∫ßu */
            font-size: 24px; 
            margin-bottom: 20px; 
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* CƒÉn gi·ªØa */
        }
        .input-container {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .game-section {
            display: none; /* ·∫®n giao di·ªán ch√≠nh ban ƒë·∫ßu */
        }
        .history-box {
            margin-top: 20px; /* Kho·∫£ng c√°ch ph·∫ßn l·ªãch s·ª≠ v√† ph·∫ßn tr√™n */
            text-align: center; /* CƒÉn gi·ªØa vƒÉn b·∫£n */
        }
        .submit-button {
            padding: 10px 20px;
            background-color: #3498db; /* M√†u n·ªÅn cho n√∫t g·ª≠i */
            color: white; /* M√†u ch·ªØ tr·∫Øng */
            border: none; /* Kh√¥ng c√≥ ƒë∆∞·ªùng vi·ªÅn */
            border-radius: 5px; /* Bo tr√≤n c√°c g√≥c c·ªßa n√∫t */
            cursor: pointer; /* Con tr·ªè khi di chu·ªôt l√™n n√∫t */
            margin-top: 10px; /* Kho·∫£ng c√°ch ph√≠a tr√™n n√∫t */
        }
    </style>
</head>
<body>

<h1>BOT T√ÄI X·ªàU</h1>
<hr>

<div class="input-container" id="inputSection">
    <input type="text" id="apikey" placeholder="Nh·∫≠p kh√≥a c·ªßa b·∫°n" />
    <button id="submitKey">G·ª≠i Kh√≥a</button>
</div>

<div class="loader" id="loader">üîÑ ƒêang t·∫£i<span id="dots">.</span></div> 

<div class="input-container" id="historySection" style="display: none;">
    <div class="history-box">
        <h3>L·ªãch S·ª≠</h3>
        <p id="historyText">Ch∆∞a c√≥ l·ªãch s·ª≠.</p>
    </div>
    <div>
        <button class="circle" id="circleA" onclick="addToHistory('A')">A</button>
        <button class="circle" id="circleB" onclick="addToHistory('B')">B</button>
    </div>
    <button class="submit-button" id="submitHistory">G·ª≠i L·ªãch S·ª≠</button> <!-- N√∫t g·ª≠i l·ªãch s·ª≠ -->
</div>

<div class="game-section" id="gameSection">
    <div class="circle-container">
        <div class="container">
            <div class="vertical">
                <div id="circleA" class="circle">A</div>
                <div class="label">A</div>
            </div>
            <button class="button" id="rotateButton">üîÅ</button>
            <div class="vertical">
                <div id="circleB" class="circle">B</div>
                <div class="label">B</div>
            </div>
        </div>
    </div>
</div>

<script>
    const loader = document.getElementById('loader');
    const submitKeyButton = document.getElementById('submitKey');
    const apikeyInput = document.getElementById('apikey');
    const historyText = document.getElementById('historyText');
    const historySection = document.getElementById('historySection');
    const gameSection = document.getElementById('gameSection');
    const dots = document.getElementById('dots');
    const submitHistoryButton = document.getElementById('submitHistory');

    let validKeys = []; 
    let history = []; // M·∫£ng l∆∞u l·ªãch s·ª≠ nh·∫≠p

    submitKeyButton.onclick = async function() {
        loader.style.display = 'block'; 
        
        const dotInterval = setInterval(() => {
            const dotCount = (dots.textContent.length % 3) + 1;
            dots.textContent = '.'.repeat(dotCount);
        }, 300); 

        setTimeout(async () => {
            clearInterval(dotInterval); 
            loader.style.display = 'none'; 
            
            await loadValidKeys(); 

            if (validKeys.includes(apikeyInput.value)) {
                alert('Kh√≥a ƒë√£ ƒë∆∞·ª£c g·ª≠i: ' + apikeyInput.value);
                apikeyInput.value = '';
                inputSection.style.display = 'none'; // ·∫®n khung nh·∫≠p li·ªáu kh√≥a
                historySection.style.display = 'block'; // Hi·ªán khung nh·∫≠p l·ªãch s·ª≠
            } else {
                alert('Kh√≥a kh√¥ng h·ª£p l·ªá. Vui l√≤ng nh·∫≠p l·∫°i.');
            }
        }, 2000); 
    };

    function addToHistory(circle) {
        if (circle === 'A') {
            history.push('A');
        } else {
            history.push('B');
        }
        updateHistoryDisplay();
    }

    function updateHistoryDisplay() {
        historyText.textContent = history.length > 0 ? history.join(', ') : 'Ch∆∞a c√≥ l·ªãch s·ª≠.';
    }

    submitHistoryButton.onclick = function() {
        if (history.length > 0) {
            alert('B·∫°n ƒë√£ g·ª≠i l·ªãch s·ª≠: ' + history.join(', '));
            historySection.style.display = 'none'; // ·∫®n khung nh·∫≠p l·ªãch s·ª≠
            gameSection.style.display = 'block'; // Hi·ªán giao di·ªán ch√≠nh
        } else {
            alert('B·∫°n ch∆∞a nh·∫≠p l·ªãch s·ª≠ n√†o.');
        }
    };

    document.getElementById('rotateButton').onclick = function() {
        // Ch·ªçn ng·∫´u nhi√™n gi·ªØa A v√† B
        const randomCircle = Math.random() < 0.5 ? document.getElementById('circleA') : document.getElementById('circleB'); 
        let blinkCount = 10; 
        const blinkInterval = setInterval(() => {
            randomCircle.classList.toggle('hidden'); 
            blinkCount--;

            if (blinkCount <= 0) { 
                clearInterval(blinkInterval);
                randomCircle.classList.remove('hidden'); 
            }
        }, 300); 
    };

    async function loadValidKeys() {
        const response = await fetch('https://docs.google.com/document/d/1ourm5Q_-do9idXDfq41NWc_HKUjIzQCiUZz3BpGshsA/export?format=txt'); 
        const text = await response.text();
        validKeys = text.split(/\s+/).filter(word => word.length >= 5); 
        console.log('Valid keys:', validKeys);
    }
</script>

</body>
</html>
